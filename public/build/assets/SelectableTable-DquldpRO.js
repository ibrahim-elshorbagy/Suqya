import{j as e,L as B,r as u,a as T}from"./app-TmW7H2Wv.js";import{u as M}from"./useTrans-Dn2DMfBr.js";function E({variant:i="primary",className:a="",disabled:l,children:d,icon:g,size:p="xs",as:c="button",href:h,...f}){const b={primary:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800",edit:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800",delete:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-800",status:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300 hover:bg-yellow-200 dark:hover:bg-yellow-800",success:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800",info:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-800"},j={xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm"},v=g?e.jsx("i",{className:`fa-solid ${g}`}):null,n=`flex items-center gap-1 ${j[p]} font-medium rounded-lg transition-all ${b[i]} ${l&&"opacity-70"} ${a}`;return c==="a"?e.jsxs(B,{href:h,className:n,...f,children:[v,d]}):e.jsxs("button",{className:n,disabled:l,...f,children:[v,d]})}function I({links:i}){return e.jsx("nav",{className:"mt-6 mb-4 flex justify-center items-center gap-1",children:i?.map((a,l)=>e.jsx(B,{preserveScroll:!0,href:a.url||"#",dangerouslySetInnerHTML:{__html:a.label},className:`inline-flex justify-center items-center h-8 min-w-8 px-3 rounded-lg text-sm transition-colors
                        ${a.active?"bg-green-500 text-white font-medium":""}
                        ${a.url?"text-neutral-700 dark:text-neutral-300 hover:bg-green-100 dark:hover:bg-green-900/30 hover:text-green-700 dark:hover:text-green-300":"text-neutral-400 dark:text-neutral-600 cursor-not-allowed"}
                    `},l))})}function J({onSort:i,sortField:a,sortDirection:l,perPage:d=15,totalItems:g=0,onPerPageChange:p,selectedItems:c=[],onSelectAll:h,onBulkDelete:f,sortOptions:b=[],queryParams:j={},routeName:v}){const{t:n}=M(),[C,y]=u.useState(!1),[S,x]=u.useState(!1),m=[10,25,50,100],_=t=>{let $="asc";t===a&&l==="asc"&&($="desc"),i(t,$),x(!1)},N=t=>{p(t),y(!1)},w=()=>{c.length!==0&&confirm(n("confirm_bulk_delete").replace("{count}",c.length))&&f(c)};u.useEffect(()=>{const t=()=>{y(!1),x(!1)};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[]);const P=t=>{t.stopPropagation()};return e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4 text-sm",children:[e.jsx("div",{className:"flex items-center gap-2",children:c.length>0?e.jsxs(E,{variant:"delete",icon:"fa-trash",size:"sm",onClick:w,children:[n("delete_selected")," (",c.length,")"]}):e.jsxs("div",{className:"text-neutral-500 dark:text-neutral-400",children:[g," ",n(g!==1?"items":"item")]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[b.length>0&&e.jsxs("div",{className:"relative",onClick:P,children:[e.jsxs(E,{variant:"primary",icon:"fa-sort",size:"sm",className:"bg-neutral-200 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-600",onClick:t=>{t.stopPropagation(),x(!S)},children:[n("sort"),a&&e.jsxs("span",{className:"hidden sm:inline ml-1",children:[n("by")," ",n(a)," ",l==="asc"?`↑ ${n("ascending")}`:`↓ ${n("descending")}`]})]}),S&&e.jsx("div",{className:"absolute right-0 z-10 mt-1 w-48 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:b.map(t=>e.jsxs("button",{className:`flex items-center w-full px-4 py-2 text-left text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${a===t.field?"text-green-600 dark:text-green-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>_(t.field),children:[t.label,a===t.field&&e.jsx("i",{className:`ml-2 fa-solid ${l==="asc"?"fa-arrow-up":"fa-arrow-down"}`})]},t.field))})})]}),e.jsxs("div",{className:"relative",onClick:P,children:[e.jsxs(E,{variant:"primary",icon:"fa-list-ol",size:"sm",className:"bg-neutral-200 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-600",onClick:t=>{t.stopPropagation(),y(!C)},children:[e.jsx("span",{children:d})," ",n("per_page")]}),C&&e.jsx("div",{className:"absolute right-0 z-10 mt-1 w-36 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:m.map(t=>e.jsx("button",{className:`flex w-full px-4 py-2 text-left text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${d===t?"text-green-600 dark:text-green-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>N(t),children:t},t))})})]})]})]})}function V({columns:i,data:a,onRowClick:l=null,routeName:d,queryParams:g={},renderRow:p=null,idField:c="id",pagination:h=null,onSort:f=null,onBulkDelete:b=null,sortOptions:j=[],defaultSortField:v=null,defaultSortDirection:n="asc",perPageOptions:C=[10,25,50,100],defaultPerPage:y=15}){const{t:S}=M(),[x,m]=u.useState([]),[_,N]=u.useState(!1),[w,P]=u.useState(v||""),[t,$]=u.useState(n),[D,O]=u.useState(g.per_page||15);u.useEffect(()=>{m([]),N(!1)},[a]);const A=r=>{m(s=>{const o=r[c];return s.includes(o)?s.filter(k=>k!==o):[...s,o]})},z=()=>{_||x.length===a.length?(m([]),N(!1)):(m(a.map(r=>r[c])),N(!0))},L=(r,s)=>{if(P(r),$(s),f)f(r,s);else if(d){const o=new URLSearchParams(g);o.set("sort",r),o.set("direction",s),T.get(route(d,{...route().params,...Object.fromEntries(o)}),{},{preserveState:!0})}},H=r=>{if(O(r),d){const s={...route().params};s.page&&delete s.page,s.per_page=r,T.get(route(d,s),{},{preserveState:!0})}},U=async r=>{b&&(await b(r),m([]))};return e.jsxs(e.Fragment,{children:[e.jsx(J,{onSort:L,sortField:w,sortDirection:t,perPage:D,totalItems:h?h.total:a.length,onPerPageChange:H,selectedItems:x,onSelectAll:z,onBulkDelete:U,sortOptions:j,queryParams:g,routeName:d}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"w-full text-sm rtl:text-right ltr:text-left text-neutral-800 dark:text-neutral-200",children:[e.jsx("thead",{className:"text-neutral-700 uppercase border-b-2 border-neutral-500 bg-neutral-100 dark:bg-neutral-800 dark:text-neutral-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-3 w-10",children:e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-green-600 bg-neutral-100 border-neutral-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600",checked:a.length>0&&x.length===a.length,onChange:z})})}),i.map(r=>e.jsx("th",{className:`py-2 px-3 font-semibold text-nowrap ${r.className||""}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[r.icon&&e.jsx("i",{className:`fa-solid ${r.icon}`}),e.jsx("span",{children:r.label}),j.find(s=>s.field===r.field)&&e.jsx("button",{className:"ml-1",onClick:()=>L(r.field,w===r.field&&t==="asc"?"desc":"asc"),children:w===r.field?e.jsx("i",{className:`fa-solid fa-sort-${t==="asc"?"up":"down"} text-green-500`}):e.jsx("i",{className:"fa-solid fa-sort text-neutral-400"})})]})},r.field))]})}),e.jsx("tbody",{children:a.length>0?a.map((r,s)=>{const o=x.includes(r[c]);return e.jsxs("tr",{className:`transition-colors ${s%2===0?"bg-neutral-100 dark:bg-neutral-800":"bg-neutral-50 dark:bg-neutral-900"} border-b border-neutral-300 dark:border-neutral-800 ${o?"bg-green-50 dark:bg-green-950":""} ${l?"cursor-pointer":""}`,onClick:l?()=>l(r):void 0,children:[e.jsx("td",{className:"px-3 py-2",onClick:k=>{k.stopPropagation(),A(r)},children:e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-green-600 bg-neutral-100 border-neutral-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600",checked:o,onChange:()=>{}})})}),p?p(r,o,A):i.map((k,G)=>e.jsx("td",{className:"px-3 py-2",children:k.render?k.render(r):r[k.accessor]||"-"},G))]},r[c])}):e.jsx("tr",{children:e.jsxs("td",{colSpan:i.length+1,className:"px-3 py-2 text-center text-neutral-500 dark:text-neutral-400",children:[e.jsx("i",{className:"fa-regular fa-face-frown"})," ",S("no_items_found")]})})})]})}),h&&e.jsx(I,{links:h.links})]})}export{E as A,V as S};
