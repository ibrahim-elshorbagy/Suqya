import{j as e,L as ae,r as c,a as q}from"./app-BBZqCkcl.js";import{A as U}from"./ActionButton-Ctok6Vou.js";import{u as W}from"./useTrans-Dl6FgQZB.js";function ne({links:x}){return e.jsx("nav",{className:"mt-6 mb-4 flex justify-center items-center gap-1",children:x?.map((l,u)=>e.jsx(ae,{preserveScroll:!0,href:l.url||"#",dangerouslySetInnerHTML:{__html:l.label},className:`inline-flex justify-center items-center h-8 min-w-8 px-3 rounded-lg text-sm transition-colors
                        ${l.active?"bg-blue-500 text-white font-medium":""}
                        ${l.url?"text-neutral-700 dark:text-neutral-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 hover:text-blue-700 dark:hover:text-blue-300":"text-neutral-400 dark:text-neutral-600 cursor-not-allowed"}
                    `},u))})}function ce({onSort:x,sortField:l,sortDirection:u,perPage:g=15,totalItems:m=0,onPerPageChange:v,selectedItems:o=[],onSelectAll:f,bulkActions:p=[],onBulkAction:z,sortOptions:A=[],queryParams:I={},routeName:w,showSelection:K=!0,viewMode:B="table",onViewToggle:O,isMobile:T=!1,pageParam:N="page"}){const{t:a}=W(),[y,k]=c.useState(!1),[h,d]=c.useState(!1),[b,S]=c.useState(!1),C=[10,25,50,100],_=r=>{let i="asc";if(r===l&&u==="asc"&&(i="desc"),x)x(r,i);else if(w){let j={...Object.fromEntries(new URLSearchParams(window.location.search))};j.sort=r,j.direction=i,j[N]=1,q.get(route(w,route().params),j,{preserveState:!0,replace:!0})}d(!1)},D=r=>{if(v)v(r);else if(w){let i={...Object.fromEntries(new URLSearchParams(window.location.search))};i.per_page=r,i[N]=1,q.get(route(w,route().params),i,{preserveState:!0,replace:!0})}k(!1)},P=r=>{if(o.length!==0){if(r.requiresConfirmation){const i=r.confirmMessageKey?a(r.confirmMessageKey,{count:o.length}):r.confirmMessage||a("confirm_action",{count:o.length});if(!confirm(i))return}z(r,o),S(!1)}};c.useEffect(()=>{const r=()=>{k(!1),d(!1),S(!1)};return document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}},[]);const M=r=>{r.stopPropagation()};return e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4 text-sm",children:[e.jsx("div",{className:"flex items-center gap-2",children:K&&o.length>0?e.jsx("div",{className:"flex items-center gap-2",children:p.length>0&&e.jsxs("div",{className:"relative",onClick:M,children:[e.jsxs(U,{variant:"primary",icon:"fa-list-check",size:"sm",onClick:r=>{r.stopPropagation(),S(!b)},children:[a("bulk_actions")," (",o.length,")"]}),b&&e.jsx("div",{className:"absolute ltr:left-0 z-10 mt-1 w-48 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:p.map((r,i)=>e.jsxs("button",{className:`flex items-center w-full px-4 py-2 gap-2 ltr:text-left rtl:text-right text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${r.variant==="delete"?"text-red-600 dark:text-red-400":r.variant==="blue"?"text-blue-600 dark:text-blue-400":r.variant==="yellow"?"text-yellow-600 dark:text-yellow-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>P(r),children:[r.icon&&e.jsx("i",{className:` ${r.icon}`}),r.label]},i))})})]})}):e.jsxs("div",{className:"text-neutral-500 dark:text-neutral-400",children:[m," ",a(m!==1?"items":"item")]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[!T&&O&&e.jsx(U,{variant:"primary",icon:B==="table"?"fa-th-large":"fa-table",size:"sm",onClick:O,title:a(B==="table"?"grid_view":"table_view"),children:e.jsx("span",{className:"hidden sm:inline",children:a(B==="table"?"grid_view":"table_view")})}),A.length>0&&e.jsxs("div",{className:"relative",onClick:M,children:[e.jsxs(U,{variant:"primary",icon:"fa-sort",size:"sm",onClick:r=>{r.stopPropagation(),d(!h)},children:[a("sort"),l&&e.jsxs("span",{className:"hidden sm:inline ml-1",children:[a("by")," ",a(l)," ",u==="asc"?`↑ ${a("ascending")}`:`↓ ${a("descending")}`]})]}),h&&e.jsx("div",{className:"absolute right-0 z-10 mt-1 w-48 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:A.map(r=>e.jsxs("button",{className:`flex items-center w-full px-4 py-2 gap-2 text-left text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${l===r.field?"text-blue-600 dark:text-blue-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>_(r.field),children:[r.label,l===r.field&&e.jsx("i",{className:` fa-solid ${u==="asc"?"fa-arrow-up":"fa-arrow-down"}`})]},r.field))})})]}),e.jsxs("div",{className:"relative",onClick:M,children:[e.jsxs(U,{variant:"primary",icon:"fa-list-ol",size:"sm",onClick:r=>{r.stopPropagation(),k(!y)},children:[e.jsx("span",{children:g})," ",a("per_page")]}),y&&e.jsx("div",{className:"absolute right-0 z-10 mt-1 w-36 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:C.map(r=>e.jsx("button",{className:`flex w-full px-4 py-2 text-left text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${g===r?"text-blue-600 dark:text-blue-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>D(r),children:r},r))})})]})]})]})}function ue({columns:x,data:l,onRowClick:u=null,routeName:g,queryParams:m={},renderRow:v=null,renderCard:o=null,idField:f="id",pagination:p=null,onSort:z=null,bulkActions:A=[],sortOptions:I=[],defaultSortField:w=null,defaultSortDirection:K="asc",perPageOptions:B=[10,25,50,100],defaultPerPage:O=15,getRowClassName:T=null,getCardClassName:N=null,showSelection:a=!0,defaultView:y="table",pageParam:k="page"}){const{t:h}=W(),[d,b]=c.useState([]),[S,C]=c.useState(!1),[_,D]=c.useState(m.sort||w||""),[P,M]=c.useState(m.direction||K),[r,i]=c.useState(m.per_page||O),[j,J]=c.useState(!1),[V,Q]=c.useState(()=>typeof window<"u"&&localStorage.getItem("tableViewMode")||y);c.useEffect(()=>{typeof window<"u"&&localStorage.setItem("tableViewMode",V)},[V]),c.useEffect(()=>{const t=()=>{J(window.innerWidth<768)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),c.useEffect(()=>{b([]),C(!1)},[l]);const X=()=>{Q(t=>t==="table"?"grid":"table")},$=t=>{b(s=>{const n=t[f];return s.includes(n)?s.filter(E=>E!==n):[...s,n]})},R=()=>{S||d.length===l.length?(b([]),C(!1)):(b(l.map(t=>t[f])),C(!0))},G=(t,s)=>{if(D(t),M(s),z)z(t,s);else if(g){let n={...Object.fromEntries(new URLSearchParams(window.location.search))};n.sort=t,n.direction=s,n[k]=1,q.get(route(g,route().params),n,{preserveState:!0,replace:!0})}},Y=t=>{if(i(t),g){let s={...Object.fromEntries(new URLSearchParams(window.location.search))};s.per_page=t,s[k]=1,q.get(route(g,route().params),s,{preserveState:!0,replace:!0})}},Z=async(t,s)=>{t.handler&&(await t.handler(s),b([]))},H=(t,s,n)=>e.jsxs("div",{className:`
        relative p-4 rounded-lg border transition-all duration-200 text-center
        ${s?"border-blue-500 bg-blue-50 dark:bg-blue-950 shadow-md":"border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 hover:shadow-md"}
        ${N?N(t,n,s):""}
      `,children:[a&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 bg-neutral-100 border-neutral-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600",checked:s,onChange:E=>{E.stopPropagation(),$(t)}})}),e.jsxs("div",{className:"py-8",children:[e.jsx("i",{className:"fa-solid fa-code text-3xl text-neutral-400 dark:text-neutral-500 mb-3"}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 text-sm",children:"No custom card template provided"}),e.jsx("p",{className:"text-neutral-500 dark:text-neutral-500 text-xs mt-1",children:"Please add renderCard prop to customize card display"})]})]},t[f]),F=()=>e.jsxs("div",{className:"space-y-3",children:[a&&l.length>0&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-neutral-100 dark:bg-neutral-800 rounded-lg",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 bg-neutral-100 border-neutral-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600",checked:l.length>0&&d.length===l.length,onChange:R}),e.jsxs("label",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:[h("select_all")," (",l.length,")"]})]}),l.length>0?l.map((t,s)=>{const n=d.includes(t[f]);return o?o(t,n,$,s):H(t,n,s)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("i",{className:"fa-regular fa-face-frown text-4xl text-neutral-400 dark:text-neutral-500 mb-4"}),e.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:h("no_items_found")})]})]}),ee=()=>e.jsxs("div",{className:"space-y-4",children:[a&&l.length>0&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-neutral-100 dark:bg-neutral-800 rounded-lg",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 bg-neutral-100 border-neutral-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600",checked:l.length>0&&d.length===l.length,onChange:R}),e.jsxs("label",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:[h("select_all")," (",l.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4",children:l.length>0?l.map((t,s)=>{const n=d.includes(t[f]);return o?o(t,n,$,s):H(t,n,s)}):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("i",{className:"fa-regular fa-face-frown text-4xl text-neutral-400 dark:text-neutral-500 mb-4"}),e.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:h("no_items_found")})]})})]}),te=()=>e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"w-full text-sm rtl:text-right ltr:text-left text-neutral-800 dark:text-neutral-200",children:[e.jsx("thead",{className:"text-neutral-700 uppercase border-b-2 border-neutral-500 bg-neutral-100 dark:bg-neutral-800 dark:text-neutral-300",children:e.jsxs("tr",{children:[a&&e.jsx("th",{className:"py-2 px-3 w-10",children:e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 bg-neutral-100 border-neutral-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600",checked:l.length>0&&d.length===l.length,onChange:R})})}),x.map(t=>e.jsx("th",{className:`py-2 px-3 font-semibold text-nowrap ${t.className||""}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[t.icon&&e.jsx("i",{className:`fa-solid ${t.icon}`}),e.jsx("span",{children:t.label}),I.find(s=>s.field===t.field)&&e.jsx("button",{className:"ml-1",onClick:()=>G(t.field,_===t.field&&P==="asc"?"desc":"asc"),children:_===t.field?e.jsx("i",{className:`fa-solid fa-sort-${P==="asc"?"up":"down"} text-blue-500`}):e.jsx("i",{className:"fa-solid fa-sort text-neutral-400"})})]})},t.field))]})}),e.jsx("tbody",{children:l.length>0?l.map((t,s)=>{const n=d.includes(t[f]),E=T?T(t,s,n):"",le=s%2===0?"bg-neutral-100 dark:bg-neutral-800":"bg-neutral-50 dark:bg-neutral-900";return e.jsxs("tr",{className:`transition-colors ${E||le} border-b border-neutral-300 dark:border-neutral-800 ${n?"bg-blue-50 dark:bg-blue-950":""} ${u?"cursor-pointer":""}`,onClick:u?()=>u(t):void 0,children:[a&&e.jsx("td",{className:"px-3 py-2",onClick:L=>{L.stopPropagation(),$(t)},children:e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 bg-neutral-100 border-neutral-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600",checked:n,onChange:()=>{}})})}),v?v(t,n,$):x.map((L,se)=>e.jsx("td",{className:"px-3 py-2",children:L.render?L.render(t):t[L.accessor]||"-"},se))]},t[f])}):e.jsx("tr",{children:e.jsxs("td",{colSpan:x.length+1,className:"px-3 py-6 text-center text-neutral-500 dark:text-neutral-400",children:[e.jsx("i",{className:"fa-regular fa-face-frown"})," ",h("no_items_found")]})})})]})}),re=()=>j?F():V==="table"?te():ee();return e.jsxs(e.Fragment,{children:[e.jsx(ce,{onSort:G,sortField:_,sortDirection:P,perPage:r,totalItems:p?p.total:l.length,onPerPageChange:Y,selectedItems:d,onSelectAll:R,bulkActions:A,onBulkAction:Z,sortOptions:I,queryParams:m,routeName:g,showSelection:a,viewMode:V,onViewToggle:X,isMobile:j,pageParam:k}),re(),p&&e.jsx(ne,{links:p.links})]})}export{ue as S};
