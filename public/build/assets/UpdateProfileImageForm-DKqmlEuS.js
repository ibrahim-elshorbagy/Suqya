import{b as N,r as d,u as w,j as e}from"./app-TmW7H2Wv.js";import{u as _}from"./useTrans-Dn2DMfBr.js";import{I as y,a as k}from"./InputLabel-CVZjVTez.js";import{P as F}from"./PrimaryButton-LrIYBZtM.js";function D({className:u=""}){const s=N().props.auth.user,{t:r}=_(),a=d.useRef(),{data:t,setData:g,post:x,processing:n,errors:p,reset:f,recentlySuccessful:h}=w({image:null,_method:"POST"}),[m,c]=d.useState(null),j=l=>{const i=l.target.files[0];if(i){g("image",i);const o=new FileReader;o.onload=v=>{c(v.target.result)},o.readAsDataURL(i)}},b=l=>{console.log("Submitting form with image:",t.image),l.preventDefault(),x(route("profile.image.update"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{f("image"),c(null),a.current&&(a.current.value="")}})};return e.jsxs("section",{className:`space-y-6 ${u}`,children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:r("profile_image")}),e.jsx("p",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-400",children:r("update_profile_image")})]}),e.jsxs("form",{onSubmit:b,className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"image",value:r("profile_image")}),e.jsxs("div",{className:"mt-2 flex items-center gap-6",children:[s.image_url?e.jsx("div",{children:e.jsx("img",{src:s.image_url,alt:s.name,className:"h-20 w-20 rounded-full object-cover border-2 border-neutral-200 dark:border-neutral-700"})}):e.jsx("div",{className:"h-20 w-20 text-white rounded-full bg-green-200 dark:bg-green-700 flex items-center justify-center",children:e.jsx("span",{className:"text-neutral-500 dark:text-neutral-400 text-2xl",children:s.name?s.name.charAt(0).toUpperCase():"?"})}),m&&e.jsx("div",{children:e.jsx("img",{src:m,alt:"Preview",className:"h-20 w-20 rounded-full object-cover border-2 border-green-400 dark:border-green-600"})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("input",{id:"image",type:"file",ref:a,className:"hidden",onChange:j,accept:"image/*"}),e.jsxs("label",{htmlFor:"image",className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md cursor-pointer hover:bg-green-700",children:[e.jsx("i",{className:"fas fa-upload"}),r("choose_file")]}),e.jsx(k,{message:p.image,className:"mt-2"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[t.image&&e.jsx(F,{type:"submit",disabled:!t.image||n,children:r(n?"uploading":"save_changes")}),h&&e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:r("saved_successfully")})]})]})]})}export{D as default};
