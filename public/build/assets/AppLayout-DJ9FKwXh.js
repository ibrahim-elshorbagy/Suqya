import{j as e,L as m,r as u,b as h,a as j}from"./app-DvKz_AwL.js";import{u as b}from"./useTrans-Dl6FgQZB.js";import{A as y}from"./ApplicationLogo-D6mI1wva.js";import{T as w}from"./Toastify-CJvTW0MD.js";function S({href:s,active:o,icon:t,children:n}){return e.jsxs(m,{href:s,className:`flex items-center rounded-xl gap-2 px-2 py-1.5 text-sm text-neutral-800 underline-offset-2 hover:bg-blue-500/5 hover:text-black focus-visible:underline focus:outline-hidden dark:text-neutral-300 dark:hover:bg-blue-400/5 dark:hover:text-neutral-100 ${o?"bg-blue-500/10 text-black dark:bg-blue-400/10 dark:text-neutral-100":""}`,children:[t&&e.jsx("i",{className:`fa-solid ${t} shrink-0`}),e.jsx("span",{children:n})]})}function L({href:s,active:o,children:t,badge:n,icon:l}){return e.jsx("li",{className:"px-1 py-0.5",children:e.jsxs(m,{href:s,className:`flex items-center rounded-xl gap-2 px-2 py-1.5 text-sm text-neutral-800 underline-offset-2 hover:bg-blue-500/5 hover:text-black focus-visible:underline focus:outline-hidden dark:text-neutral-300 dark:hover:bg-blue-400/5 dark:hover:text-neutral-100 ${o?"bg-blue-500/10 text-black dark:bg-blue-400/10 dark:text-neutral-100":""}`,children:[l&&e.jsx("i",{className:`fa-solid ${l} shrink-0 text-xs`}),e.jsx("span",{children:t}),n&&e.jsx("span",{className:"ml-auto font-bold",children:n})]})})}function _({item:s}){const o=s.submenu.some(a=>route().current(a.route)||route().current(a.route+".*")),t=route().current(s.route),[n,l]=u.useState(o||t||s.active||!1);return u.useEffect(()=>{(o||t)&&l(!0)},[o,t]),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("button",{type:"button",onClick:()=>l(a=>!a),className:`flex items-center justify-between rounded-xl gap-2 px-2 py-1.5 text-sm font-medium underline-offset-2 focus:outline-hidden focus-visible:underline ${n||o||t?"text-black bg-blue-500/10 dark:text-neutral-100 dark:bg-blue-400/10":"text-neutral-800 hover:bg-blue-500/5 hover:text-black dark:text-neutral-300 dark:hover:bg-blue-400/5 dark:hover:text-neutral-100"}`,children:[e.jsx("i",{className:`fa-solid ${s.icon} shrink-0`}),e.jsx("span",{className:"ltr:mr-auto ltr:text-left rtl:ml-auto rtl:text-right",children:s.name}),e.jsx("i",{className:`fa-solid fa-chevron-down transition-transform shrink-0 ${n?"rotate-180":"rotate-0"}`})]}),n&&e.jsx("ul",{className:"flex flex-col gap-0.5 mt-1",children:s.submenu.map(a=>e.jsx(L,{href:a.href,active:route().current(a.route)||route().current(a.route+".*"),icon:a.icon,children:a.name},a.route))})]})}function E({className:s=""}){const{t:o}=b(),[t,n]=u.useState(()=>typeof window<"u"?localStorage.theme==="dark"||localStorage.theme==="light"?localStorage.theme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":"light");u.useEffect(()=>{const i=window.document.documentElement;t==="dark"?(i.classList.add("dark"),localStorage.theme="dark"):t==="light"?(i.classList.remove("dark"),localStorage.theme="light"):(window.matchMedia("(prefers-color-scheme: dark)").matches?i.classList.add("dark"):i.classList.remove("dark"),localStorage.removeItem("theme"))},[t]);const l=()=>{n(i=>i==="light"?"dark":"light")},a=()=>t==="dark"?"fa-moon":"fa-sun",c=()=>o(t==="dark"?"dark_mode":"light_mode");return e.jsxs("button",{onClick:l,className:`flex items-center gap-2 text-neutral-700 hover:text-neutral-900 dark:text-neutral-300 dark:hover:text-neutral-100 ${s}`,"aria-label":`Toggle to ${t==="dark"?"light":"dark"} theme`,title:`Switch to ${t==="dark"?"light":"dark"} mode`,children:[e.jsx("i",{className:`fa-solid ${a()}`}),e.jsx("span",{className:"dark:text-white",children:c()})]})}function N(){const{t:s}=b(),{auth:o,impersonate_admin_id:t}=h().props,[n,l]=u.useState(!1),a=u.useRef(null);u.useEffect(()=>{const i=f=>{f.key==="Escape"&&l(!1)},x=f=>{a.current&&!a.current.contains(f.target)&&l(!1)};if(n)return document.addEventListener("keydown",i),document.addEventListener("mousedown",x),()=>{document.removeEventListener("keydown",i),document.removeEventListener("mousedown",x)}},[n]);const c=()=>{j.post(route("logout"),{},{preserveScroll:!0})};return e.jsxs("div",{className:"mt-auto relative",ref:a,children:[e.jsxs("button",{type:"button",className:`flex w-full items-center rounded-xl gap-2 p-2 text-left text-neutral-800 hover:bg-blue-500/5 hover:text-black focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 dark:text-neutral-300 dark:hover:bg-blue-400/5 dark:hover:text-neutral-100 dark:focus-visible:outline-blue-400 ${n?"bg-blue-500/10 dark:bg-blue-400/10":""}`,"aria-haspopup":"true","aria-expanded":n,onClick:()=>l(i=>!i),children:[o.user?.image_url?e.jsx("div",{className:"size-8 rounded-xl overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:o.user.image_url,alt:o.user.name,className:"h-full w-full object-cover"})}):e.jsx("div",{className:"size-8 rounded-xl bg-blue-500 flex items-center justify-center text-white font-semibold",children:o.user?.name?.[0]?.toUpperCase()||"?"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-black dark:text-neutral-100",children:o.user?.name||"Guest"}),e.jsx("span",{className:"sr-only",children:"profile settings"})]}),e.jsx("i",{className:"fa-solid fa-chevron-right rtl:mr-auto ltr:ml-auto shrink-0 ltr:rotate-90 rtl:rotate-90 ltr:md:rotate-0 rtl:md:rotate-180","aria-hidden":"true"})]}),n&&e.jsxs("div",{className:`absolute w-full md:w-48  md:bottom-0 ltr:md:right-[-195px] rtl:md:left-[-195px] z-20   border divide-y divide-neutral-300 border-neutral-300 bg-neutral-100 dark:divide-neutral-700 dark:border-neutral-700 dark:bg-neutral-800 rounded-xl
          animate-fade-in`,role:"menu",children:[e.jsx("div",{className:"flex flex-col py-1.5",children:e.jsxs(m,{href:route("profile.edit"),className:"flex items-center gap-2 px-2 py-1.5 text-sm font-medium text-neutral-800 underline-offset-2 hover:bg-blue-500/5 hover:text-black focus-visible:underline focus:outline-hidden dark:text-neutral-300 dark:hover:bg-blue-400/5 dark:hover:text-neutral-100",role:"menuitem",children:[e.jsx("i",{className:"fa-solid fa-user shrink-0","aria-hidden":"true"}),e.jsx("span",{children:s("profile")})]})}),e.jsx("div",{className:"flex flex-col py-1.5",children:e.jsx(E,{className:"w-full justify-start px-2 py-1.5 text-sm font-medium text-neutral-800 underline-offset-2 hover:bg-blue-500/5 hover:text-black focus-visible:underline focus:outline-hidden dark:text-neutral-300 dark:hover:bg-blue-400/5 dark:hover:text-neutral-100"})}),t&&e.jsx("div",{className:"flex flex-col py-1.5",children:e.jsxs("button",{onClick:()=>j.post(route("admin.return_to_admin"),{},{preserveScroll:!0}),className:"flex items-center gap-2 px-2 py-1.5 text-sm font-medium text-blue-800 underline-offset-2 hover:bg-blue-500/10 hover:text-blue-900 focus-visible:underline focus:outline-hidden dark:text-blue-300 dark:hover:bg-blue-400/10 dark:hover:text-blue-100",role:"menuitem",children:[e.jsx("i",{className:"fa-solid fa-user-shield shrink-0","aria-hidden":"true"}),e.jsx("span",{children:s("return_to_admin")})]})}),e.jsx("div",{className:"flex flex-col py-1.5",children:e.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-2 py-1.5 text-sm font-medium text-neutral-800 underline-offset-2 hover:bg-blue-500/5 hover:text-black focus-visible:underline focus:outline-hidden dark:text-neutral-300 dark:hover:bg-blue-400/5 dark:hover:text-neutral-100",role:"menuitem",children:[e.jsx("i",{className:"fa-solid fa-right-from-bracket shrink-0","aria-hidden":"true"}),e.jsx("span",{children:s("sign_out")})]})})]})]})}function I({sidebarIsOpen:s,setSidebarIsOpen:o}){const{t}=b(),{auth:n}=h().props,[l,a]=u.useState(""),c=u.useRef(),i=n.roles||[],x=[{name:t("dashboard"),icon:"fa-chart-line",href:route("dashboard"),route:"dashboard",role:""},{name:t("user_management"),icon:"fa-users",route:"admin.users.*",role:"admin",submenu:[{name:t("users"),href:route("admin.users.index"),route:"admin.users.*",icon:"fa-user"}]},{name:t("settings"),icon:"fa-gear",href:route("tenant.info"),route:"profile",role:"tenant"}],f=r=>r.role?i.includes(r.role):!0,p=u.useMemo(()=>x.filter(r=>f(r)),[x,i]),v=u.useMemo(()=>{if(!l)return[];const r=l.toLowerCase().trim(),k=[];return p.forEach(d=>{d.submenu?d.submenu.forEach(g=>{k.push({...g,parent:d.name,parentIcon:d.icon,icon:g.icon||d.icon})}):k.push(d)}),k.filter(d=>d.name.toLowerCase().includes(r)||d.parent&&d.parent.toLowerCase().includes(r))},[l,p]);return e.jsxs("nav",{className:`fixed left-0 z-30 flex min-h-svh w-60 shrink-0 flex-col border-r border-neutral-300 bg-neutral-200 p-4 transition-transform duration-300 md:w-64 md:translate-x-0 md:relative dark:border-neutral-700 dark:bg-neutral-900 ${s?"translate-x-0":"-translate-x-60"}`,"aria-label":"sidebar navigation",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(m,{href:route("dashboard"),className:"ml-2 w-48 text-2xl font-bold text-black dark:text-neutral-100",children:e.jsx(y,{})})}),e.jsxs("div",{className:"relative flex w-full max-w-xs flex-col gap-1 text-neutral-800 dark:text-neutral-300",children:[e.jsx("i",{className:"fa-solid fa-search absolute left-2 top-1/2 -translate-y-1/2 text-neutral-800/50 dark:text-neutral-300/50"}),e.jsx("input",{type:"search",ref:c,value:l,onChange:r=>a(r.target.value),className:"w-full border border-neutral-300 rounded-xl bg-neutral-100 px-2 py-1.5 pl-9 text-sm focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 disabled:cursor-not-allowed disabled:opacity-75 dark:border-neutral-700 dark:bg-neutral-800/50 dark:focus-visible:outline-blue-400",placeholder:t("search_navigation"),"aria-label":"Search"}),l&&v.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700 rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto",children:v.map(r=>e.jsxs(m,{href:r.href||"#",onClick:()=>a(""),className:"flex items-center gap-3 px-3 py-2 text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors first:rounded-t-lg last:rounded-b-lg",children:[e.jsx("i",{className:`fa-solid ${r.icon} shrink-0`}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:r.name}),r.parent&&e.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:r.parent})]})]},r.route))}),l&&v.length===0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700 rounded-lg shadow-lg z-50 px-3 py-4 text-center text-sm text-neutral-500 dark:text-neutral-400",children:t("no_results_for",{query:l})})]}),!l&&e.jsx("div",{className:"flex flex-col gap-2 overflow-y-auto pb-6 mt-4",children:p.map(r=>r.submenu?e.jsx(_,{item:r},r.name):e.jsx(S,{href:r.href,active:route().current(r.route),icon:r.icon,children:r.name},r.name))}),e.jsx(N,{})]})}function A({children:s,title:o}){const{locale:t}=h().props,{t:n}=b(),{auth:l}=h().props,[a,c]=u.useState(!1),i=()=>{c(x=>!x)};return e.jsxs("div",{className:"antialiased font-tajawal",dir:t==="ar"?"rtl":"ltr",children:[e.jsxs("div",{className:" bg-gray-100 dark:bg-neutral-800 min-h-[100vh]",children:[e.jsxs("nav",{className:"md:hidden flex items-center justify-between px-4 py-3 bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-800 sticky top-0 z-40",children:[e.jsx("button",{type:"button",className:"p-2 rounded-lg text-neutral-600 hover:text-neutral-900 hover:bg-neutral-50 dark:text-neutral-300 dark:hover:text-neutral-100 dark:hover:bg-neutral-800 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":n("open_sidebar"),onClick:i,children:e.jsx("i",{className:"fa-solid fa-bars size-6"})}),e.jsx("div",{className:"w-8"}),e.jsx(N,{})]}),a&&e.jsx("div",{className:"fixed inset-0 z-20 bg-neutral-800/10 backdrop-blur-xs md:hidden","aria-hidden":"true",onClick:()=>c(!1),style:{transition:"opacity 0.2s"}}),e.jsxs("div",{className:"relative flex w-full flex-col md:flex-row",children:[e.jsx(I,{sidebarIsOpen:a,setSidebarIsOpen:c}),e.jsx("main",{className:"h-full w-full overflow-y-auto",children:s})]})]}),e.jsx(w,{})]})}export{A,E as T};
