import{r as x,u as y,j as e}from"./app-ygSqRkCd.js";import{u as L}from"./useTrans-Dl6FgQZB.js";import{I as r,a as m}from"./InputLabel-D0D61duI.js";import{T as u}from"./TextInput-RklKMRn-.js";import{T as C}from"./TextArea-D56TudrW.js";import{P as S}from"./PrimaryButton-BHUY-HVF.js";import{z as T}from"./transition-oSt3q1Cy.js";function B({settings:l}){const{t:a}=L(),h=x.useRef(null),[_,j]=x.useState(null),[I,v]=x.useState(null),{data:t,setData:n,post:k,processing:w,errors:p,recentlySuccessful:N}=y({settings:{support_whatsapp:l.support_whatsapp||"",support_phone:l.support_phone||"",support_mobile:l.support_mobile||"",support_email:l.support_email||"",company_address:l.company_address||"",google_map_link:l.google_map_link||"",business_latitude:l.business_latitude||null,business_longitude:l.business_longitude||null}});x.useEffect(()=>{if(window.L)s();else{const i=document.createElement("link");i.rel="stylesheet",i.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(i);const o=document.createElement("script");o.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",o.onload=s,document.head.appendChild(o)}function s(){if(h.current&&window.L){const i=t.settings.business_latitude||31.9539,o=t.settings.business_longitude||35.9106,g=window.L.map(h.current).setView([i,o],13);window.L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Â© OpenStreetMap contributors"}).addTo(g);const b=window.L.marker([i,o],{draggable:!0}).addTo(g);b.on("dragend",function(d){const c=d.target.getLatLng();n(f=>({...f,settings:{...f.settings,business_latitude:c.lat,business_longitude:c.lng}}))}),g.on("click",function(d){b.setLatLng(d.latlng),n(c=>({...c,settings:{...c.settings,business_latitude:d.latlng.lat,business_longitude:d.latlng.lng}}))}),j(g),v(b)}}return()=>{_&&_.remove()}},[]);const X=s=>{s.preventDefault(),k(route("admin.site-settings.update"),{preserveScroll:!0})};return e.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900 rounded-xl border border-neutral-200 dark:border-neutral-800 overflow-hidden animate-fadeIn",children:[e.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-950/30",children:[e.jsxs("h2",{className:"font-semibold text-neutral-900 dark:text-neutral-100 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-phone text-blue-500"}),a("contact_info")]}),e.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mt-1",children:a("contact_info_description")})]}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:X,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:a("support_whatsapp")}),e.jsx(u,{value:t.settings.support_whatsapp,onChange:s=>n("settings",{...t.settings,support_whatsapp:s.target.value}),icon:"fab fa-whatsapp",className:"mt-1 block w-full",placeholder:"+966XXXXXXXXX"}),e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:a("whatsapp_help")}),e.jsx(m,{message:p["settings.support_whatsapp"],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{value:a("support_phone")}),e.jsx(u,{value:t.settings.support_phone,onChange:s=>n("settings",{...t.settings,support_phone:s.target.value}),icon:"fa-phone",className:"mt-1 block w-full",placeholder:"+966-11-XXXXXXX"}),e.jsx(m,{message:p["settings.support_phone"],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{value:a("support_mobile")}),e.jsx(u,{value:t.settings.support_mobile,onChange:s=>n("settings",{...t.settings,support_mobile:s.target.value}),icon:"fa-mobile",className:"mt-1 block w-full",placeholder:"+966XXXXXXXXX"}),e.jsx(m,{message:p["settings.support_mobile"],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{value:a("support_email")}),e.jsx(u,{type:"email",value:t.settings.support_email,onChange:s=>n("settings",{...t.settings,support_email:s.target.value}),icon:"fa-envelope",className:"mt-1 block w-full",placeholder:"support@example.com"}),e.jsx(m,{message:p["settings.support_email"],className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(r,{value:a("company_address")}),e.jsx(C,{value:t.settings.company_address,onChange:s=>n("settings",{...t.settings,company_address:s.target.value}),icon:"fa-map-marker-alt",className:"mt-1 block w-full",rows:"3",placeholder:a("address_placeholder")}),e.jsx(m,{message:p["settings.company_address"],className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{value:a("business_location")}),e.jsx("div",{ref:h,className:"w-full h-96 border border-neutral-300 dark:border-neutral-700 rounded-lg"}),e.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:a("click_drag_map_description")})]}),e.jsxs("div",{className:"hidden",children:[e.jsxs("div",{children:[e.jsx(r,{value:a("latitude")}),e.jsx(u,{type:"number",step:"any",value:t.settings.business_latitude||"",onChange:s=>n("settings",{...t.settings,business_latitude:s.target.value}),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(r,{value:a("longitude")}),e.jsx(u,{type:"number",step:"any",value:t.settings.business_longitude||"",onChange:s=>n("settings",{...t.settings,business_longitude:s.target.value}),className:"mt-1 block w-full"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-neutral-200 dark:border-neutral-800 flex items-center gap-4",children:[e.jsx(S,{type:"submit",disabled:w,icon:"fa-floppy-disk",rounded:"rounded-lg",withShadow:!1,children:a("save_changes")}),e.jsx(T,{show:N,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-check"})," ",a("saved_successfully")]})})]})]})})]})}export{B as default};
