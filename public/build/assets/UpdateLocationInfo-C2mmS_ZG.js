import{r as g,u as L,j as e}from"./app-etRuqPt_.js";import{I as n,a as d}from"./InputLabel-DF0gVgRh.js";import{T as m}from"./TextInput-BuPQQpgf.js";import{T as C}from"./TextArea-DZa_zVtk.js";import{P as F}from"./PrimaryButton-lY9AHWWx.js";import{u as T}from"./useTrans-Dl6FgQZB.js";import{z as I}from"./transition-Ds6PFl9r.js";function B({tenant:r,className:y=""}){const{t}=T(),f=g.useRef(null),[h,v]=g.useState(null),[S,N]=g.useState(null),{data:l,setData:s,patch:k,processing:b,errors:i,recentlySuccessful:w}=L({country:r?.country||"",city:r?.city||"",area:r?.area||"",full_address:r?.full_address||"",latitude:r?.latitude||null,longitude:r?.longitude||null});g.useEffect(()=>{if(window.L)a();else{const c=document.createElement("link");c.rel="stylesheet",c.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(c);const o=document.createElement("script");o.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",o.onload=a,document.head.appendChild(o)}function a(){if(f.current&&window.L){const c=l.latitude||31.9539,o=l.longitude||35.9106,p=window.L.map(f.current).setView([c,o],13);window.L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Â© OpenStreetMap contributors"}).addTo(p);const x=window.L.marker([c,o],{draggable:!0}).addTo(p);x.on("dragend",function(u){const j=u.target.getLatLng();s("latitude",j.lat),s("longitude",j.lng)}),p.on("click",function(u){x.setLatLng(u.latlng),s("latitude",u.latlng.lat),s("longitude",u.latlng.lng)}),v(p),N(x)}}return()=>{h&&h.remove()}},[]);const _=a=>{a.preventDefault(),k(route("tenant.location-info.update",r.slug),l,{preserveScroll:!0})};return e.jsxs("section",{className:y,children:[e.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-4",children:t("update_location_info_description")}),e.jsxs("form",{onSubmit:_,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"country",value:t("country")}),e.jsx(m,{id:"country",className:"mt-1 block w-full",value:l.country,onChange:a=>s("country",a.target.value),icon:"fa-flag",placeholder:t("enter_country")}),e.jsx(d,{className:"mt-2",message:i.country})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"city",value:t("city")}),e.jsx(m,{id:"city",className:"mt-1 block w-full",value:l.city,onChange:a=>s("city",a.target.value),icon:"fa-city",placeholder:t("enter_city")}),e.jsx(d,{className:"mt-2",message:i.city})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"area",value:t("area")}),e.jsx(m,{id:"area",className:"mt-1 block w-full",value:l.area,onChange:a=>s("area",a.target.value),icon:"fa-map-pin",placeholder:t("enter_area")}),e.jsx(d,{className:"mt-2",message:i.area})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"full_address",value:t("full_address")}),e.jsx(C,{id:"full_address",className:"mt-1 block w-full",value:l.full_address,onChange:a=>s("full_address",a.target.value),rows:3,icon:"fa-map-marker-alt",placeholder:t("enter_full_address")}),e.jsx(d,{className:"mt-2",message:i.full_address})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 hidden",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"latitude",value:t("latitude")}),e.jsx(m,{id:"latitude",type:"number",step:"any",className:"mt-1 block w-full",value:l.latitude||"",onChange:a=>s("latitude",a.target.value),icon:"fa-map-marker-alt",placeholder:"31.9539"}),e.jsx(d,{className:"mt-2",message:i.latitude})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"longitude",value:t("longitude")}),e.jsx(m,{id:"longitude",type:"number",step:"any",className:"mt-1 block w-full",value:l.longitude||"",onChange:a=>s("longitude",a.target.value),icon:"fa-map-marker-alt",placeholder:"35.9106"}),e.jsx(d,{className:"mt-2",message:i.longitude})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{value:t("location_picker")}),e.jsx("div",{ref:f,className:"w-full h-[300px] xl:h-[600px] border border-neutral-300 dark:border-neutral-700 rounded-lg"}),e.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:t("click_drag_map_description")})]}),e.jsxs("div",{className:"pt-4 flex items-center gap-4",children:[e.jsx(F,{type:"submit",disabled:b,icon:"fa-floppy-disk",rounded:"rounded-lg",withShadow:!1,children:t("save_changes")}),e.jsx(I,{show:w,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-check"})," ",t("saved_successfully")]})})]})]})]})}export{B as default};
