import{j as a,a as s,L as N}from"./app-0kQzlsIH.js";import{A as l}from"./ActionButton-Db6MceOV.js";import{S as w}from"./SelectableTable-Bvw15jZa.js";import{u as y}from"./useTrans-Dl6FgQZB.js";function D({users:d,onEdit:o,pageParam:x}){const{t}=y(),c=(e,n)=>{s.put(route("admin.users.update",e),{blocked:!n},{preserveState:!0,preserveScroll:!0})},b=e=>{confirm(`${t("are_you_sure_delete")} "${e.name}"?`)&&s.delete(route("admin.users.destroy",e.id),{preserveScroll:!0})},u=async e=>{s.patch(route("admin.users.bulk.block"),{ids:e},{preserveState:!0,preserveScroll:!0})},m=async e=>{s.patch(route("admin.users.bulk.unblock"),{ids:e},{preserveState:!0,preserveScroll:!0})},f=async e=>{s.delete(route("admin.users.bulk.delete"),{data:{ids:e},preserveState:!0,preserveScroll:!0})},h=[{label:t("block_users"),icon:"fa-solid fa-ban",handler:u,variant:"yellow",requiresConfirmation:!0,confirmMessageKey:"confirm_block_users"},{label:t("unblock_users"),icon:"fa-solid fa-check-circle",handler:m,variant:"blue",requiresConfirmation:!0,confirmMessageKey:"confirm_unblock_users"},{label:t("delete_users"),icon:"fa-solid fa-trash-can",handler:f,variant:"delete",requiresConfirmation:!0,confirmMessageKey:"confirm_delete_users"}],p=[{field:"row_number",label:t("serial"),icon:"fa-hashtag"},{field:"name",label:t("name"),icon:"fa-user"},{field:"email",label:t("email_address"),icon:"fa-envelope"},{field:"status",label:t("status"),icon:"fa-circle-info"},{field:"created_at",label:t("created_at"),icon:"fa-calendar"},{field:"actions",label:t("actions"),icon:"fa-gear",className:"flex justify-center"}],k=[{field:"name",label:t("name")},{field:"email",label:t("email_address")},{field:"blocked",label:t("status")},{field:"created_at",label:t("created_at")}],g=e=>a.jsxs(a.Fragment,{children:[a.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-neutral-900 dark:text-neutral-100",children:e.row_number}),a.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"fa-solid fa-user text-blue-500"}),a.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:e.name})]})}),a.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"fa-solid fa-envelope text-blue-500"}),a.jsx("span",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:e.email})]})}),a.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.blocked?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:[a.jsx("i",{className:`fa-solid ${e.blocked?"fa-ban":"fa-check-circle"} mx-1`}),e.blocked?t("blocked"):t("active")]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400",children:new Date(e.created_at).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(l,{onClick:n=>{n.stopPropagation(),confirm(t("are_you_sure_login_as")+` "${e.name}"?`)&&s.post(route("admin.login_as",e.id),{},{preserveScroll:!0})},variant:"info",icon:"fa-right-to-bracket",size:"xs",as:"button",children:t("login_as")}),a.jsx(l,{onClick:n=>{n.stopPropagation(),o(e)},variant:"edit",icon:"fa-edit",size:"xs",as:"button",children:t("edit")}),e.roles[0].name=="tenant"&&e.tenant&&a.jsx(l,{onClick:n=>{n.stopPropagation(),s.get(route("admin.users.view-tenant",e.id))},variant:"primary",icon:"fa-eye",size:"xs",as:"button",children:t("view")}),a.jsx(l,{onClick:n=>{n.stopPropagation(),c(e.id,e.blocked)},variant:e.blocked?"success":"delete",icon:e.blocked?"fa-check-circle":"fa-ban",size:"xs",as:"button",children:e.blocked?t("unblock"):t("block")}),a.jsx(l,{onClick:n=>{n.stopPropagation(),b(e)},variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:t("delete")})]})})]}),v=(e,n,i,C)=>a.jsxs("div",{className:`
          relative p-4 rounded-lg border transition-all duration-200
          ${n?"border-blue-500 bg-blue-50 dark:bg-blue-950 shadow-md":e.blocked?"border-red-300 bg-red-50 dark:bg-red-950 dark:border-red-700":"border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800"}
          hover:shadow-md
        `,children:[a.jsx("div",{className:"absolute top-3 left-3",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 bg-neutral-100 border-neutral-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600",checked:n,onChange:r=>{r.stopPropagation(),i(e)}})}),a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a.jsx("div",{className:"flex-shrink-0",children:e.image_url?a.jsx("img",{src:e.image_url,alt:e.name,className:"w-12 h-12 rounded-full object-cover border-2 border-blue-400 dark:border-blue-600"}):a.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:a.jsx("i",{className:"fa-solid fa-user text-blue-600 dark:text-blue-400 text-lg"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100 truncate",children:e.name}),a.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 truncate",children:e.email})]})]}),e.roles&&e.roles.length>0&&e.roles[0].name==="tenant"&&e.tenant&&a.jsxs("div",{className:`mb-3 p-3 space-y-1 min-h-[200px]
            [&>div]:flex [&>div]:items-center [&>div]:gap-3
            [&>div>i]:w-3 [&>div>i]:inline-flex [&>div>i]:justify-center
            text-blue-700 dark:text-white text-sm rounded
            bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-700`,children:[a.jsxs("div",{children:[a.jsx("i",{className:"fa-solid fa-building"}),a.jsxs("span",{children:[t("tenant_name"),": ",a.jsx("a",{href:route("admin.users.view-tenant",e.id),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200 underline",children:e.tenant.name})]})]}),a.jsxs("div",{children:[a.jsx("i",{className:"fa-solid fa-link"}),a.jsxs("span",{children:[t("tenant_slug"),": ",a.jsx(N,{target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200 underline",children:e.tenant.slug})]})]}),e.tenant.phone&&a.jsxs("div",{children:[a.jsx("i",{className:"fa-solid fa-phone"}),a.jsxs("span",{children:[t("tenant_phone"),": ",a.jsx("a",{href:`tel:${e.tenant.phone}`,className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200 underline",children:e.tenant.phone})]})]}),e.tenant.whatsapp&&a.jsxs("div",{children:[a.jsx("i",{className:"fa-brands fa-whatsapp"}),a.jsxs("span",{children:[t("tenant_whatsapp"),": ",a.jsx("a",{href:`https://wa.me/${e.tenant.whatsapp.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-200 underline",children:e.tenant.whatsapp})]})]}),e.tenant.email&&a.jsxs("div",{children:[a.jsx("i",{className:"fa-solid fa-envelope"}),a.jsxs("span",{children:[t("tenant_email"),": ",a.jsx("a",{href:`mailto:${e.tenant.email}`,className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200 underline",children:e.tenant.email})]})]}),e.tenant.full_address&&a.jsxs("div",{children:[a.jsx("i",{className:"fa-solid fa-location-dot"}),a.jsxs("span",{children:[t("full_address"),": ",a.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${e.tenant.latitude&&e.tenant.longitude?`${e.tenant.latitude},${e.tenant.longitude}`:encodeURIComponent(e.tenant.full_address)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200 underline",children:e.tenant.full_address})]})]})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.blocked?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:[a.jsx("i",{className:`fa-solid ${e.blocked?"fa-ban":"fa-check-circle"} mx-1`}),e.blocked?t("blocked"):t("active")]})}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500 dark:text-neutral-400 mb-4",children:[a.jsx("i",{className:"fa-solid fa-calendar"}),a.jsxs("span",{children:[t("created_at"),": ",new Date(e.created_at).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2 pt-3 border-t border-neutral-200 dark:border-neutral-700",children:[a.jsx(l,{onClick:r=>{r.stopPropagation(),o(e)},variant:"edit",icon:"fa-edit",size:"xs",as:"button",children:t("edit")}),a.jsx(l,{onClick:r=>{r.stopPropagation(),c(e.id,e.blocked)},variant:e.blocked?"success":"delete",icon:e.blocked?"fa-check-circle":"fa-ban",size:"xs",as:"button",children:e.blocked?t("unblock"):t("block")}),a.jsx(l,{onClick:r=>{r.stopPropagation(),confirm(t("are_you_sure_login_as")+` "${e.name}"?`)&&s.post(route("admin.login_as",e.id),{},{preserveScroll:!0})},variant:"info",icon:"fa-right-to-bracket",size:"xs",as:"button",children:t("login_as")}),e.roles[0].name=="tenant"&&e.tenant&&a.jsx(l,{onClick:r=>{r.stopPropagation(),s.get(route("admin.users.view-tenant",e.id))},variant:"primary",icon:"fa-eye",size:"xs",as:"button",children:t("view")}),a.jsx(l,{onClick:r=>{r.stopPropagation(),b(e)},variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:t("delete")})]})]},e.id),j=(e,n,i)=>i?"":e.blocked?"bg-red-50 dark:bg-red-950 hover:bg-red-100 dark:hover:bg-red-900":n%2===0?"bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700":"bg-neutral-50 dark:bg-neutral-900 hover:bg-neutral-100 dark:hover:bg-neutral-800",_=(e,n,i)=>i?"":e.blocked?"hover:bg-red-100 dark:hover:bg-red-900":"hover:bg-neutral-50 dark:hover:bg-neutral-750";return a.jsx(w,{columns:p,data:d?d.data:[],pagination:d,routeName:"admin.users.index",queryParams:{},sortOptions:k,defaultSortField:"created_at",defaultSortDirection:"desc",renderRow:g,renderCard:v,getRowClassName:j,getCardClassName:_,bulkActions:h,pageParam:x})}export{D as default};
