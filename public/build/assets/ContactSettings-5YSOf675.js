import{r as g,u as X,j as e}from"./app-CRmMjhEs.js";import{u as y}from"./useTrans-Dl6FgQZB.js";import{I as r,a as c}from"./InputLabel-CDA-mAHS.js";import{T as u}from"./TextInput-BKZzjlKg.js";import{T as L}from"./TextArea-DGklb7Ju.js";import{P as C}from"./PrimaryButton-BGNgcqTC.js";import{z as S}from"./transition-CkZOvCos.js";function P({settings:l}){const{t:a}=y(),x=g.useRef(null),[b,f]=g.useState(null),[T,j]=g.useState(null),{data:s,setData:n,post:v,processing:k,errors:p,recentlySuccessful:w}=X({settings:{support_whatsapp:l.support_whatsapp||"",support_phone:l.support_phone||"",support_mobile:l.support_mobile||"",support_email:l.support_email||"",company_address:l.company_address||"",google_map_link:l.google_map_link||"",business_latitude:l.business_latitude||null,business_longitude:l.business_longitude||null}});g.useEffect(()=>{if(window.L)t();else{const i=document.createElement("link");i.rel="stylesheet",i.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(i);const o=document.createElement("script");o.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",o.onload=t,document.head.appendChild(o)}function t(){if(x.current&&window.L){const i=s.settings.business_latitude||31.9539,o=s.settings.business_longitude||35.9106,m=window.L.map(x.current).setView([i,o],13);window.L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Â© OpenStreetMap contributors"}).addTo(m);const h=window.L.marker([i,o],{draggable:!0}).addTo(m);h.on("dragend",function(d){const _=d.target.getLatLng();n("settings",{...s.settings,business_latitude:_.lat,business_longitude:_.lng})}),m.on("click",function(d){h.setLatLng(d.latlng),n("settings",{...s.settings,business_latitude:d.latlng.lat,business_longitude:d.latlng.lng})}),f(m),j(h)}}return()=>{b&&b.remove()}},[]);const N=t=>{t.preventDefault(),v(route("admin.site-settings.update"),{preserveScroll:!0})};return e.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900 rounded-xl border border-neutral-200 dark:border-neutral-800 overflow-hidden animate-fadeIn",children:[e.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-950/30",children:[e.jsxs("h2",{className:"font-semibold text-neutral-900 dark:text-neutral-100 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-phone text-blue-500"}),a("contact_info")]}),e.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mt-1",children:a("contact_info_description")})]}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{value:a("support_whatsapp")}),e.jsx(u,{value:s.settings.support_whatsapp,onChange:t=>n("settings",{...s.settings,support_whatsapp:t.target.value}),icon:"fab fa-whatsapp",className:"mt-1 block w-full",placeholder:"+966XXXXXXXXX"}),e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:a("whatsapp_help")}),e.jsx(c,{message:p["settings.support_whatsapp"],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{value:a("support_phone")}),e.jsx(u,{value:s.settings.support_phone,onChange:t=>n("settings",{...s.settings,support_phone:t.target.value}),icon:"fa-phone",className:"mt-1 block w-full",placeholder:"+966-11-XXXXXXX"}),e.jsx(c,{message:p["settings.support_phone"],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{value:a("support_mobile")}),e.jsx(u,{value:s.settings.support_mobile,onChange:t=>n("settings",{...s.settings,support_mobile:t.target.value}),icon:"fa-mobile",className:"mt-1 block w-full",placeholder:"+966XXXXXXXXX"}),e.jsx(c,{message:p["settings.support_mobile"],className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{value:a("support_email")}),e.jsx(u,{type:"email",value:s.settings.support_email,onChange:t=>n("settings",{...s.settings,support_email:t.target.value}),icon:"fa-envelope",className:"mt-1 block w-full",placeholder:"support@example.com"}),e.jsx(c,{message:p["settings.support_email"],className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(r,{value:a("company_address")}),e.jsx(L,{value:s.settings.company_address,onChange:t=>n("settings",{...s.settings,company_address:t.target.value}),icon:"fa-map-marker-alt",className:"mt-1 block w-full",rows:"3",placeholder:a("address_placeholder")}),e.jsx(c,{message:p["settings.company_address"],className:"mt-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{value:a("business_location")}),e.jsx("div",{ref:x,className:"w-full h-96 border border-neutral-300 dark:border-neutral-700 rounded-lg"}),e.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:a("click_drag_map_description")})]}),e.jsxs("div",{className:"hidden",children:[e.jsxs("div",{children:[e.jsx(r,{value:a("latitude")}),e.jsx(u,{type:"number",step:"any",value:s.settings.business_latitude||"",onChange:t=>n("settings",{...s.settings,business_latitude:t.target.value}),className:"mt-1 block w-full"})]}),e.jsxs("div",{children:[e.jsx(r,{value:a("longitude")}),e.jsx(u,{type:"number",step:"any",value:s.settings.business_longitude||"",onChange:t=>n("settings",{...s.settings,business_longitude:t.target.value}),className:"mt-1 block w-full"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-neutral-200 dark:border-neutral-800 flex items-center gap-4",children:[e.jsx(C,{type:"submit",disabled:k,icon:"fa-floppy-disk",rounded:"rounded-lg",withShadow:!1,children:a("save_changes")}),e.jsx(S,{show:w,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-check"})," ",a("saved_successfully")]})})]})]})})]})}export{P as default};
